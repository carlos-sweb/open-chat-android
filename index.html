<!doctype html>
<html lang="en"> <head>
<link rel="icon" type="image/png" href="favicon.png">
<meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
	
<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="node_modules/normalize.css/normalize.css">
<link rel="stylesheet" href="node_modules/flexboxgrid/dist/flexboxgrid.min.css" >
<link rel="stylesheet" href="node_modules/spectre.css/dist/spectre.min.css">
	<link rel="stylesheet" href="node_modules/spectre.css/dist/spectre-exp.min.css">
			<link rel="stylesheet" href="node_modules/spectre.css/dist/spectre-icons.min.css">
<title>WatsApp Non Contact!</title>
</head> 
<body>
	
<div class="container">

	<div class="column col-xs-12 col-sm-10 col-md-8 col-lg-5">
<div class="box">
	<div class="form-group">
	<label class="form-label">Contry Code</label>	
	 <select id="codecontry" class="form-select"></select> </div>
		  	
		  	
		  	<div class="form-group">
		  		<label class="form-label">Number Phone</label>
		  		
		  	<div class="input-group">	<input id="phone" name="phone" type="number" class="form-input" autocomplete="off" autocapitalize="off" pattern="[0-9]" />
		  		<span id="paste" class="input-group-addon tooltip" data-tooltip="Pasted!"><i class="icon icon-share "></i></span>
		  		<span id="copy" class="input-group-addon tooltip" data-tooltip="Copied!"><i class="icon icon-copy"></i></span>
		  		</div>
		  		
		  	</div>
		  </div>
		  <div class="box end-xs">  	
		  	<button id="open" style="margin-top:8px;" class="btn btn-primary"><i class="icon icon-message"></i>&nbsp;Open</button>  	
		  </div>
	</div>
</div>


<code id="agent" >
		
</code>


<script src="code-contry/dist/contrycode.js"></script>
<script src="node_modules/jquery/dist/jquery.min.js"></script>
<script src="node_modules/axios/dist/axios.min.js"></script>
<script>

var nsWebViewBridge = null;

window.addEventListener("ns-bridge-ready", function(e) {
	
    nsWebViewBridge = e.detail || window.nsWebViewBridge;
	
	document.getElementById("open").setAttribute("ci-nativescript",null);

    // do stuff here
});
	
async function paste() { 
	const text = await navigator.clipboard.readText();
 $("#phone").val(text)
}
	
	var option ="";
	contrycode.forEach((opt)=>{
		  option +="<option value='"+opt.code+"' "+(opt.code == "56" ?"selected":"")+">"+opt.contry+" / "+opt.code+"</option>";
	});
	
	
	$("#codecontry")
	.html(option)
	$("#codecontry")
	.attr("value","56")
	
$("#copy").on("click",()=>{
	$("#phone").select()
	document.execCommand("copy");
})

$("#paste").on("click",()=>{
	 paste()
})
	

$("#open").on('click',function(){ 
		
	const val = $("#codecontry").val()+$("#phone").val();

	if( !( this.getAttribute("ci-nativescript") === null ) ){

		window.open("whatsapp://send/?phone="+val+"")

	}else{

		$("#agent").html("Correcte")

	}
	
});

//$("#agent").text( JSON.stringify(window.navigator.userAgent,null,2) )
</script>
</body></html>